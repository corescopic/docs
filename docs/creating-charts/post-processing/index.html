<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.13">
<title data-react-helmet="true">Post Processing | corescopic Documentation</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://docs.corescopic.com/docs/creating-charts/post-processing"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Post Processing | corescopic Documentation"><meta data-react-helmet="true" name="description" content="Post Processing allows you to customize data before it is rendered as a chart, table or number. While the data source already provides powerful features to select, aggregate and group data, some use-cases may require more customization that isn&#x27;t possible or is very complicated with database queries."><meta data-react-helmet="true" property="og:description" content="Post Processing allows you to customize data before it is rendered as a chart, table or number. While the data source already provides powerful features to select, aggregate and group data, some use-cases may require more customization that isn&#x27;t possible or is very complicated with database queries."><link data-react-helmet="true" rel="icon" href="/img/logo.png"><link data-react-helmet="true" rel="canonical" href="https://docs.corescopic.com/docs/creating-charts/post-processing"><link data-react-helmet="true" rel="alternate" href="https://docs.corescopic.com/docs/creating-charts/post-processing" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://docs.corescopic.com/docs/creating-charts/post-processing" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.ef5031ab.css">
<link rel="preload" href="/assets/js/runtime~main.905885a0.js" as="script">
<link rel="preload" href="/assets/js/main.c9ccc2a9.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="corescopic logo" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/img/logo.png" alt="corescopic logo" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title">corescopic Documentation</b></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Documentation</a></div><div class="navbar__items navbar__items--right"><a href="https://corescopic.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Homepage<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">ðŸŒœ</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">ðŸŒž</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">Getting started</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/tracking-code/implementation">Tracking Code</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_TwRn" href="/docs/creating-charts/chart-types">Creating Charts</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/creating-charts/chart-types">Chart Types</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" tabindex="0" href="/docs/creating-charts/data-source/configuration">Data Source</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/creating-charts/post-processing">Post Processing</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="theme-doc-markdown markdown"><header><h1>Post Processing</h1></header><p>Post Processing allows you to customize data before it is rendered as a chart, table or number. While the data source already provides powerful features to select, aggregate and group data, some use-cases may require more customization that isn&#x27;t possible or is very complicated with database queries.</p><blockquote><p>While post-processing allows powerful customization, the processing will happen in the browser. Due to this, all required data needs to be transmitted and execution may be comparatively slow.
Using the data source query instead of complicated post-processing scripts is recommended when possible.</p></blockquote><p>In the chart editor you may provide a post-processing script - by default this script will be:</p><div class="codeBlockContainer_J+bg language-JavaScript"><div class="codeBlockContent_csEI JavaScript"><pre tabindex="0" class="prism-code language-JavaScript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">((data) =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  return data;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">})</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>corescopic uses JavaScript as the programming language for post-processing script.</p><p>The post-processing script is a function that takes one parameter - <code>data</code> - that contains the data fetched from the database.</p><p>The provided <code>data</code> array might look like this - but it highly depends on the data source query:</p><div class="codeBlockContainer_J+bg language-JavaScript"><div class="codeBlockContent_csEI JavaScript"><pre tabindex="0" class="prism-code language-JavaScript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">[</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;events.count&quot;: 2,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;events.user_id&quot;: &quot;O2XfWSAl8mLYJ8fNikgf9bCIoENG9bJmj4FRfpo5Iq0HRWW4ajsT3lbExOGyVmfSongPiCX8abEpR9jXHpl7U8sx5S2hRZaWH8tH&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;events.session_id&quot;: &quot;CcOKKdyeX6OzlVRmG0YnXtCIne0ulU7lmjJjbuWpivMt6EuY7FD87HcHPQM0Pkhhk8dK3XjsvFFoBvl1ptZ75wbiz6Kw63xZpy6b&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;events.contents.accountType&quot;: &quot;new&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;events.count&quot;: 19,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;events.user_id&quot;: &quot;0HRWW4ajsT3lbExOGyVmfSongPiCX8abEpR9jXHpl7U8sx5S2hRZaWH8tHO2XfWSAl8mLYJ8fNikgf9bCIoENG9bJmj4FRfpo5Iq&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;events.session_id&quot;: &quot;ne0ulU7lmjJjbuWpivMt6EuY7FD87HcHPQM0Pkhhk8dK3XjsvFFoBvl1ptZ75wbiz6Kw63xZpy6bCcOKKdyeX6OzlVRmG0YnXtCI&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;events.contents.accountType&quot;: &quot;existing&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">]</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Your function should return an array of data elements that will be used for charting.</p><p>A script must return the processed value directly (i.e. can&#x27;t use methods like Promises or async) and will be terminated after 5 seconds as a script running this long will be marked as unresponsive.</p><p>For the example data provided above, you could transform the &quot;accountType&quot; to be a more readable &quot;New Customer&quot; and &quot;Existing Customer&quot; instead of &quot;new&quot; and &quot;existing&quot; using this script:</p><div class="codeBlockContainer_J+bg language-JavaScript"><div class="codeBlockContent_csEI JavaScript"><pre tabindex="0" class="prism-code language-JavaScript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">((data) =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  return data.map((item) =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    item[&#x27;events.contents.accountType&#x27;] = item[&#x27;events.contents.accountType&#x27;] === &quot;new&quot; ? &quot;New Customer&quot; : &quot;Existing Customer&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return item;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">})</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><header><h1>Sandbox</h1></header><p>The script will run in a sandboxed <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API" target="_blank" rel="noopener noreferrer">Web Worker</a>. Due to the sandboxing, you may only access whitelisted functions like <code>parseInt</code> but can&#x27;t access functions like <code>fetch</code>.</p><blockquote><p>While the sandbox provides some protection against malicious code, you should not run untrusted post-processing code in your user account.</p></blockquote><p>Whitelisted functions and features currently are:</p><ul><li>Array</li><li>Boolean</li><li>Date</li><li>Function</li><li>Object</li><li>String</li><li>undefined</li><li>Infinity</li><li>isFinite</li><li>isNaN</li><li>Math</li><li>NaN</li><li>Number</li><li>parseFloat</li><li>parseInt</li><li>RegExp</li><li>console</li></ul><p>You may use any of these features in your script. If you use any non-whitelisted features, the chart will show the data directly returned by the database and log information about the access violation into the console:</p><p><img alt="Sandbox violation in console" src="/assets/images/sandbox_violation-2383dfa00bc1b6eb1794596f71dcabba.png"></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/corescopic/docs/edit/main/website/docs/creating-charts/post-processing.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/creating-charts/data-source/cql"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« <!-- -->CQL</div></a></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Legal</div><ul class="footer__items"><li class="footer__item"><a href="https://corescopic.com/imprint" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Imprint<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://corescopic.com/privacy-policy" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Privacy Policy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 corescopic Team. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.905885a0.js"></script>
<script src="/assets/js/main.c9ccc2a9.js"></script>
</body>
</html>